CREATE table "USERS" (
    "USER_ID"     VARCHAR2(60) NOT NULL,
    "USER_PW"     VARCHAR2(60) NOT NULL,
    "USER_NUM"    NUMBER NOT NULL,
    "USER_NAME"   VARCHAR2(60) NOT NULL,
    "USER_EMAIL"  VARCHAR2(90) NOT NULL,
    "USER_PHONE"  VARCHAR2(20) NOT NULL,
    "REG_DATE"    TIMESTAMP,
    "USER_BANNED" TIMESTAMP,
    constraint  "USERS_PK" primary key ("USER_ID")
)
/

alter table "USERS" add
constraint "USERS_UK1" 
unique ("USER_NUM")
/   



CREATE table "QA_POST" (
    "POST_NUM"     NUMBER,
    "POST_TITLE"   VARCHAR2(90) NOT NULL,
    "POST_CONTENT" VARCHAR2(3000) NOT NULL,
    "REG_DATE"     TIMESTAMP,
    "USER_ID"      VARCHAR2(60) NOT NULL,
    constraint  "QA_POST_PK" primary key ("POST_NUM")
)
/

ALTER TABLE "QA_POST" ADD CONSTRAINT "QA_POST_FK" 
FOREIGN KEY ("USER_ID")
REFERENCES "USERS" ("USER_ID")
ON DELETE CASCADE

/


CREATE table "QA_COMMENT" (
    "COMMENT_NUM"     NUMBER NOT NULL,
    "COMMENT_CONTENT" VARCHAR2(600) NOT NULL,
    "REG_DATE"        TIMESTAMP,
    "USER_ID"         VARCHAR2(60) NOT NULL,
    "POST_NUM"        NUMBER NOT NULL,
    constraint  "QA_COMMENT_PK" primary key ("COMMENT_NUM")
)
/

ALTER TABLE "QA_COMMENT" ADD CONSTRAINT "QA_COMMENT_FK" 
FOREIGN KEY ("USER_ID")
REFERENCES "USERS" ("USER_ID")
ON DELETE CASCADE

/
ALTER TABLE "QA_COMMENT" ADD CONSTRAINT "QA_COMMENT_FK2" 
FOREIGN KEY ("POST_NUM")
REFERENCES "QA_POST" ("POST_NUM")
ON DELETE CASCADE

/






CREATE table "SELL_POST" (
    "POST_NUM"        NUMBER NOT NULL,
    "POST_TITLE"      VARCHAR2(90) NOT NULL,
    "POST_CONTENT"    VARCHAR2(3000) NOT NULL,
    "POST_PHOTO"      VARCHAR2(90) NOT NULL,
    "REG_DATE"        TIMESTAMP,
    "ITEM_CATEGORY"   VARCHAR2(90) NOT NULL,
    "ITEM_NAME"       VARCHAR2(90) NOT NULL,
    "ITEM_CLASS"      CHAR(1) NOT NULL,
    "ITEM_CURPRICE"   NUMBER NOT NULL,
    "ITEM_INCREASE"   NUMBER NOT NULL,
    "ITEM_EXPIREDATE" TIMESTAMP NOT NULL,
    "MSG_SENT"        CHAR(1) NOT NULL,
    "USER_ID"         VARCHAR2(60) NOT NULL,
    constraint  "SELL_POST_PK" primary key ("POST_NUM")
)
/

ALTER TABLE "SELL_POST" ADD CONSTRAINT "SELL_POST_FK" 
FOREIGN KEY ("USER_ID")
REFERENCES "USERS" ("USER_ID")
ON DELETE CASCADE

/









CREATE table "SELL_COMMENT" (
    "COMMENT_NUM"     NUMBER NOT NULL,
    "COMMENT_CONTENT" VARCHAR2(600) NOT NULL,
    "REG_DATE"        TIMESTAMP,
    "USER_ID"         VARCHAR2(60) NOT NULL,
    "POST_NUM"        NUMBER NOT NULL,
    constraint  "SELL_COMMENT_PK" primary key ("COMMENT_NUM")
)
/

ALTER TABLE "SELL_COMMENT" ADD CONSTRAINT "SELL_COMMENT_FK" 
FOREIGN KEY ("USER_ID")
REFERENCES "USERS" ("USER_ID")
ON DELETE CASCADE

/
ALTER TABLE "SELL_COMMENT" ADD CONSTRAINT "SELL_COMMENT_FK2" 
FOREIGN KEY ("POST_NUM")
REFERENCES "SELL_POST" ("POST_NUM")
ON DELETE CASCADE

/













CREATE table "BUY_POST" (
    "POST_NUM"        NUMBER NOT NULL,
    "POST_TITLE"      VARCHAR2(90) NOT NULL,
    "POST_CONTENT"    VARCHAR2(3000) NOT NULL,
    "POST_PHOTO"      VARCHAR2(90) NOT NULL,
    "REG_DATE"        TIMESTAMP,
    "ITEM_CATEGORY"   VARCHAR2(90) NOT NULL,
    "ITEM_NAME"       VARCHAR2(90) NOT NULL,
    "ITEM_CLASS"      CHAR(1) NOT NULL,
    "USER_ID"         VARCHAR2(60) NOT NULL,
    constraint  "BUY_POST_PK" primary key ("POST_NUM")
)
/
ALTER TABLE "BUY_POST" ADD CONSTRAINT "BUY_POST_FK" 
FOREIGN KEY ("USER_ID")
REFERENCES "USERS" ("USER_ID")
ON DELETE CASCADE/















CREATE table "BUY_COMMENT" (
    "COMMENT_NUM"     NUMBER NOT NULL,
    "COMMENT_CONTENT" VARCHAR2(600) NOT NULL,
    "REG_DATE"        TIMESTAMP,
    "USER_ID"         VARCHAR2(60) NOT NULL,
    "POST_NUM"        NUMBER NOT NULL,
    constraint  "BUY_COMMENT_PK" primary key ("COMMENT_NUM")
)/


ALTER TABLE "BUY_COMMENT" ADD CONSTRAINT "BUY_COMMENT_FK" 
FOREIGN KEY ("USER_ID")
REFERENCES "USERS" ("USER_ID")
ON DELETE CASCADE

/
ALTER TABLE "BUY_COMMENT" ADD CONSTRAINT "BUY_COMMENT_FK2" 
FOREIGN KEY ("POST_NUM")
REFERENCES "BUY_POST" ("POST_NUM")
ON DELETE CASCADE

/
















CREATE table "MYLIST" (
    "SELLER_ID"  VARCHAR2(60) NOT NULL,
    "BUYER_ID"   VARCHAR2(60) NOT NULL,
    "POST_NUM"   NUMBER NOT NULL
)
/

alter table "MYLIST" add constraint  "MYLIST_PK" primary key ("BUYER_ID","POST_NUM")
/

ALTER TABLE "MYLIST" ADD CONSTRAINT "MYLIST_FK" 
FOREIGN KEY ("SELLER_ID")
REFERENCES "USERS" ("USER_ID")
ON DELETE CASCADE

/
ALTER TABLE "MYLIST" ADD CONSTRAINT "MYLIST_FK2" 
FOREIGN KEY ("BUYER_ID")
REFERENCES "USERS" ("USER_ID")
ON DELETE CASCADE

/
ALTER TABLE "MYLIST" ADD CONSTRAINT "MYLIST_FK3" 
FOREIGN KEY ("POST_NUM")
REFERENCES "SELL_POST" ("POST_NUM")
ON DELETE CASCADE

/



CREATE table "AUCTION" (
    "ITEM_CURPRICE"   NUMBER NOT NULL,
    "SELLER_ID"  VARCHAR2(60) NOT NULL,
    "BUYER_ID"   VARCHAR2(60) NOT NULL,
    "POST_NUM"   NUMBER NOT NULL,
    "ITEM_EXPIREDATE" TIMESTAMP NOT NULL
)
/
ALTER TABLE "AUCTION" ADD CONSTRAINT "AUCTION_FK" 
FOREIGN KEY ("SELLER_ID")
REFERENCES "USERS" ("USER_ID")
ON DELETE CASCADE
/
ALTER TABLE "AUCTION" ADD CONSTRAINT "AUCTION_FK2" 
FOREIGN KEY ("BUYER_ID")
REFERENCES "USERS" ("USER_ID")
ON DELETE CASCADE
/
ALTER TABLE "AUCTION" ADD CONSTRAINT "AUCTION_FK3" 
FOREIGN KEY ("POST_NUM")
REFERENCES "SELL_POST" ("POST_NUM")
ON DELETE CASCADE
/













CREATE table "SELL_HISTORY" (
    "ITEM_CATEGORY" VARCHAR2(90) NOT NULL,
    "ITEM_NAME"     VARCHAR2(90) NOT NULL,
    "ITEM_CLASS"    CHAR(1) NOT NULL,
    "ITEM_CURPRICE"         NUMBER NOT NULL,
    "SELL_DATE"     TIMESTAMP NOT NULL,
    "BUYER_ID"      VARCHAR2(60) NOT NULL,
    "SELLER_ID"     VARCHAR2(60) NOT NULL
)
/

ALTER TABLE "SELL_HISTORY" ADD CONSTRAINT "SELL_HISTORY_FK" 
FOREIGN KEY ("SELLER_ID")
REFERENCES "USERS" ("USER_ID")
ON DELETE CASCADE
/










CREATE table "BUY_HISTORY" (
    "ITEM_CATEGORY" VARCHAR2(90) NOT NULL,
    "ITEM_NAME"     VARCHAR2(90) NOT NULL,
    "ITEM_CLASS"    CHAR(1) NOT NULL,
    "ITEM_CURPRICE"         NUMBER NOT NULL,
    "BUY_DATE"     TIMESTAMP NOT NULL,
    "BUYER_ID"      VARCHAR2(60) NOT NULL,
    "SELLER_ID"     VARCHAR2(60) NOT NULL
)
/

ALTER TABLE "BUY_HISTORY" ADD CONSTRAINT "BUY_HISTORY_FK" 
FOREIGN KEY ("BUYER_ID")
REFERENCES "USERS" ("USER_ID")
ON DELETE CASCADE

/










CREATE table "RECEIVED_MSG" (
    "MSG_NUM"     NUMBER NOT NULL,
    "MSG_TITLE"   VARCHAR2(90) NOT NULL,
    "MSG_CONTENT" VARCHAR2(3000) NOT NULL,
    "MSG_CHECK"   CHAR(1) NOT NULL,
    "REG_DATE"    TIMESTAMP,
    "SENDER_ID"   VARCHAR2(60) NOT NULL,
    "RECEIVER_ID" VARCHAR2(60) NOT NULL,
    constraint  "RECEIVED_MSG_PK" primary key ("MSG_NUM")
)
/

ALTER TABLE "RECEIVED_MSG" ADD CONSTRAINT "RECEIVED_MSG_FK" 
FOREIGN KEY ("RECEIVER_ID")
REFERENCES "USERS" ("USER_ID")
ON DELETE CASCADE

/















CREATE table "SENT_MSG" (
    "MSG_NUM"     NUMBER NOT NULL,
    "MSG_TITLE"   VARCHAR2(90) NOT NULL,
    "MSG_CONTENT" VARCHAR2(3000) NOT NULL,
    "MSG_CHECK"   CHAR(1) NOT NULL,
    "REG_DATE"    TIMESTAMP,
    "SENDER_ID"   VARCHAR2(60) NOT NULL,
    "RECEIVER_ID" VARCHAR2(60) NOT NULL,
    constraint  "SENT_MSG_PK" primary key ("MSG_NUM")
)
/

ALTER TABLE "SENT_MSG" ADD CONSTRAINT "SENT_MSG_FK" 
FOREIGN KEY ("SENDER_ID")
REFERENCES "USERS" ("USER_ID")
ON DELETE CASCADE

/









create sequence "USERS_SEQ"
start with 1
increment by 1
nocache
nocycle
noorder
/   

create sequence "SELL_POST_SEQ"
start with 1
increment by 1
nocache
nocycle
noorder
/   

create sequence "SELL_COMMENT_SEQ"
start with 1
increment by 1
nocache
nocycle
noorder
/   

create sequence "QA_POST_SEQ"
start with 1
increment by 1
nocache
nocycle
noorder
/   

create sequence "QA_COMMENT_SEQ"
start with 1
increment by 1
nocache
nocycle
noorder
/   

create sequence "BUY_POST_SEQ"
start with 1
increment by 1
nocache
nocycle
noorder
/   

create sequence "BUY_COMMENT_SEQ"
start with 1
increment by 1
nocache
nocycle
noorder
/   

create sequence "SENT_MSG_SEQ"
start with 1
increment by 1
nocache
nocycle
noorder
/   

create sequence "RECEIVED_MSG_SEQ"
start with 1
increment by 1
nocache
nocycle
noorder
/   










CREATE table "MARKET_PRICE" (
    "ITEM_CATEGORY" VARCHAR2(90),
    "ITEM_NAME"     VARCHAR2(90),
    "ITEM_CLASS"    CHAR(1),
    "ITEM_CURPRICE" NUMBER,
    "SOLD_DATE"     TIMESTAMP
)
/